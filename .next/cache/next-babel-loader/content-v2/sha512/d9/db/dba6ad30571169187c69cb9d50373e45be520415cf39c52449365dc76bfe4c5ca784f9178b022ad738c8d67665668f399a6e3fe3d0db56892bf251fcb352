{"ast":null,"code":"import natural from 'natural';\nimport blog from '@data/blog.json';\nconst data = {};\nblog.forEach(it => {\n  data[it.title] = natural.PorterStemmerRu.stem(it.title + JSON.stringify(it.keywords) + JSON.stringify(it.body));\n});\nexport default function search(req, res) {\n  if (req.method !== 'POST') {\n    res.status(401).send({\n      message: 'Wrong request'\n    });\n    return;\n  }\n\n  const body = JSON.parse(req.body);\n\n  if (!body.query && !body.keyword) {\n    res.status(401).send({\n      message: 'Request params does not respond API schema'\n    });\n    return;\n  }\n\n  if (body.query) {\n    const query = natural.PorterStemmerRu.stem(body.query.toLowerCase());\n    const response = [];\n    Object.entries(data).forEach(([key, value]) => {\n      if (value.includes(query)) response.push(key);\n    });\n    res.status(200).json(response);\n    return;\n  }\n\n  if (body.keyword) {\n    const response = [];\n    blog.forEach(it => {\n      if (it.keywords.includes(body.keyword)) response.push(it.title);\n    });\n    res.status(200).json(response);\n  }\n}","map":null,"metadata":{},"sourceType":"module"}