{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _defineProperty from \"C:/Users/Yoskutik/Desktop/MyInspire-ph.ru-v4/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useRef, useState } from 'react';\nimport { useToasts } from 'react-toast-notifications';\nimport { FetchRequest } from '@utils';\nimport styles from '@sass/pages/contacts/Contacts.module.scss';\n\nvar Input = function Input(props) {\n  var _useState = useState(false),\n      danger = _useState[0],\n      setDanger = _useState[1];\n\n  var ref = useRef();\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.contacts__feedback_field,\n    children: /*#__PURE__*/_jsx(\"label\", {\n      className: styles.contacts__feedback_label,\n      htmlFor: props.name,\n      children: /*#__PURE__*/React.createElement(props.rows ? 'textarea' : 'input', _objectSpread(_objectSpread({}, props), {}, {\n        className: \"\".concat(styles.contacts__feedback_input, \" \").concat(danger ? 'danger' : ''),\n        onBlur: function onBlur() {\n          return setDanger(!ref.current.validity.valid);\n        },\n        id: props.name,\n        ref: ref\n      }))\n    })\n  });\n};\n\nvar lastSendAt;\nexport var ContactsFeedback = function ContactsFeedback() {\n  var _useState2 = useState(false),\n      showRequiredError = _useState2[0],\n      setShowRequiredError = _useState2[1];\n\n  var _useState3 = useState(false),\n      showEmailError = _useState3[0],\n      setShowEmailError = _useState3[1];\n\n  var _useToasts = useToasts(),\n      addToast = _useToasts.addToast;\n\n  var onSubmit = function onSubmit(evt) {\n    evt.preventDefault(); // const requiredError = $$(`.${styles.contacts__feedback_input}[required]`)\n    //     .some((el: HTMLInputElement) => el.validity.valueMissing);\n    // setShowRequiredError(requiredError);\n    // const emailError = $<HTMLInputElement>('.contacts__feedback_input[name=email]').validity.typeMismatch;\n    // setShowEmailError(emailError);\n    //\n    // if (!requiredError && !emailError) return;\n    //\n    // if (lastSendAt && Date.now() - lastSendAt < 15000) return;\n    //\n    // const form = $<HTMLFormElement>('.contacts__feedback_form');\n\n    new FetchRequest({\n      url: '/sendMail/'\n    }).request(); // fetch('/api/sendMail.php', {\n    //     method: 'POST',\n    //     body: new FormData(form),\n    // })\n    //     .then(response => {\n    //         if (response.ok) {\n    //             lastSendAt = Date.now();\n    //             form.reset();\n    //             addToast('Сообщение успешно отправлено', {\n    //                 appearance: 'success',\n    //                 autoDismiss: true,\n    //             });\n    //         } else {\n    //             throw new Error();\n    //         }\n    //     })\n    //     .catch(() => addToast('При отправке сообщения возникли ошибки', {\n    //         appearance: 'error',\n    //         autoDismiss: true,\n    //     }));\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    className: styles.contacts__feedback,\n    children: [/*#__PURE__*/_jsx(\"h3\", {\n      className: styles.contacts__feedback_title,\n      children: \"\\u041F\\u0440\\u044F\\u043C\\u0430\\u044F \\u0441\\u0432\\u044F\\u0437\\u044C\"\n    }), /*#__PURE__*/_jsxs(\"form\", {\n      className: styles.contacts__feedback_form,\n      autoComplete: \"off\",\n      children: [/*#__PURE__*/_jsx(Input, {\n        type: \"text\",\n        name: \"name\",\n        placeholder: \"\\u0412\\u0430\\u0448\\u0435 \\u0438\\u043C\\u044F:\",\n        required: true\n      }), /*#__PURE__*/_jsx(Input, {\n        type: \"email\",\n        name: \"email\",\n        placeholder: \"E-mail:\",\n        required: true\n      }), /*#__PURE__*/_jsx(Input, {\n        type: \"text\",\n        name: \"subject\",\n        placeholder: \"\\u0422\\u0435\\u043C\\u0430:\",\n        required: true\n      }), /*#__PURE__*/_jsx(Input, {\n        name: \"message\",\n        placeholder: \"\\u0421\\u043E\\u043E\\u0431\\u0449\\u0435\\u043D\\u0438\\u0435:\",\n        required: true,\n        rows: 6\n      }), /*#__PURE__*/_jsx(\"input\", {\n        type: \"submit\",\n        value: \"\\u041E\\u0442\\u043F\\u0440\\u0430\\u0432\\u0438\\u0442\\u044C\",\n        className: styles.contacts__feedback_submit,\n        onClick: onSubmit\n      })]\n    }), showRequiredError && /*#__PURE__*/_jsx(\"p\", {\n      className: styles.contacts__feedback_error,\n      children: \"* \\u0417\\u0430\\u043F\\u043E\\u043B\\u043D\\u0438\\u0442\\u0435, \\u043F\\u043E\\u0436\\u0430\\u043B\\u0443\\u0439\\u0441\\u0442\\u0430, \\u0432\\u0441\\u0435 \\u043F\\u043E\\u043B\\u044F\"\n    }), showEmailError && /*#__PURE__*/_jsx(\"p\", {\n      className: styles.contacts__feedback_error,\n      children: \"* \\u041F\\u043E\\u043B\\u0435 \\u043F\\u043E\\u0447\\u0442\\u044B \\u0437\\u0430\\u043F\\u043E\\u043B\\u043D\\u0435\\u043D\\u043E \\u043D\\u0435\\u0432\\u0435\\u0440\\u043D\\u043E\"\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}