{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useCallback, useMemo } from 'react';\nimport { $$, debounce, isElementVisible, useEventListener } from '@utils';\nimport { Picture } from '@components';\nimport styles from '@sass/pages/portfolio/Portfolio.module.scss';\nimport { Gallery } from './Gallery';\n\nvar Thumbnail = function Thumbnail(_ref) {\n  var onClick = _ref.onClick,\n      imgSrc = _ref.imgSrc;\n  var title = imgSrc.replace('.jpg', '');\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.thumbnail,\n    onClick: onClick,\n    role: \"button\",\n    tabIndex: 0,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.thumbnail__photo,\n      children: [/*#__PURE__*/_jsx(Picture, {\n        alt: title,\n        src: \"/photos/portfolio/thumbnails/\".concat(imgSrc, \".jpg\")\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.thumbnail__title,\n        children: title\n      })]\n    })\n  });\n};\n\nexport var Portfolio = function Portfolio(_ref2) {\n  var isMobile = _ref2.isMobile,\n      photos = _ref2.photos;\n\n  var _useState = useState(null),\n      galleryItems = _useState[0],\n      setGalleryItems = _useState[1];\n\n  var galleryItemsMap = useMemo(function () {\n    var items = {};\n    photos.gallery.forEach(function (it) {\n      var key = it.split('/')[0];\n\n      if (key in items) {\n        items[key].push(it);\n      } else {\n        items[key] = [it];\n      }\n    });\n    return items;\n  }, []);\n  var updateGalleryItems = useCallback(function (imgSrc) {\n    setGalleryItems(imgSrc ? galleryItemsMap[imgSrc.replace('.jpg', '')] : null);\n  }, []);\n  useEventListener(globalThis, 'scroll', debounce(function () {\n    if (!isMobile) return;\n    $$(\".\".concat(styles.thumbnail)).forEach(function (it) {\n      isElementVisible(it, 230) ? it.classList.add(styles.hover) : it.classList.remove(styles.hover);\n    });\n  }));\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.portfolio,\n      children: photos.thumbnails.map(function (imgSrc) {\n        return /*#__PURE__*/_jsx(Thumbnail, {\n          imgSrc: imgSrc,\n          onClick: function onClick() {\n            return updateGalleryItems(imgSrc);\n          }\n        }, imgSrc);\n      })\n    }), galleryItems && /*#__PURE__*/_jsx(\"div\", {\n      className: styles.gallery,\n      children: /*#__PURE__*/_jsx(Gallery, {\n        photos: galleryItems,\n        onClose: function onClose() {\n          return updateGalleryItems(null);\n        }\n      })\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}