{"ast":null,"code":"import { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useState, useCallback, useMemo } from 'react';\nimport { $$, debounce, isElementVisible, useEventListener } from '@utils';\nimport { Picture } from '@components';\nimport styles from '@sass/pages/portfolio/Portfolio.module.scss';\nimport { Gallery } from './Gallery';\n\nconst Thumbnail = ({\n  onClick,\n  imgSrc\n}) => {\n  const title = imgSrc.replace('.jpg', '');\n  return /*#__PURE__*/_jsx(\"div\", {\n    className: styles.thumbnail,\n    onClick: onClick,\n    role: \"button\",\n    tabIndex: 0,\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      className: styles.thumbnail__photo,\n      children: [/*#__PURE__*/_jsx(Picture, {\n        alt: title,\n        src: `/photos/portfolio/thumbnails/${imgSrc}.jpg`\n      }), /*#__PURE__*/_jsx(\"div\", {\n        className: styles.thumbnail__title,\n        children: title\n      })]\n    })\n  });\n};\n\nexport const Portfolio = ({\n  isMobile,\n  photos\n}) => {\n  const {\n    0: galleryItems,\n    1: setGalleryItems\n  } = useState(null);\n  const galleryItemsMap = useMemo(() => {\n    const items = {};\n    photos.gallery.forEach(it => {\n      const key = it.split('/')[0];\n\n      if (key in items) {\n        items[key].push(it);\n      } else {\n        items[key] = [it];\n      }\n    });\n    return items;\n  }, []);\n  const updateGalleryItems = useCallback(imgSrc => {\n    setGalleryItems(imgSrc ? galleryItemsMap[imgSrc.replace('.jpg', '')] : null);\n  }, []);\n  useEventListener(globalThis, 'scroll', debounce(() => {\n    if (!isMobile) return;\n    $$(`.${styles.thumbnail}`).forEach(it => {\n      isElementVisible(it, 230) ? it.classList.add(styles.hover) : it.classList.remove(styles.hover);\n    });\n  }));\n  return /*#__PURE__*/_jsxs(_Fragment, {\n    children: [/*#__PURE__*/_jsx(\"div\", {\n      className: styles.portfolio,\n      children: photos.thumbnails.map(imgSrc => /*#__PURE__*/_jsx(Thumbnail, {\n        imgSrc: imgSrc,\n        onClick: () => updateGalleryItems(imgSrc)\n      }, imgSrc))\n    }), galleryItems && /*#__PURE__*/_jsx(\"div\", {\n      className: styles.gallery,\n      children: /*#__PURE__*/_jsx(Gallery, {\n        photos: galleryItems,\n        onClose: () => updateGalleryItems(null)\n      })\n    })]\n  });\n};","map":null,"metadata":{},"sourceType":"module"}